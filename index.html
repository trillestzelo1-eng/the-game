<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Spam for Gains üí™</title>

  <!-- iPhone anti-zoom -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <style>
    :root{
      --bg:#0f0f12;
      --panel:#171720;
      --accent:#ff4081;
      --text:#ffffff;
      --muted:#b8b8c7;
      --rage:#ff3b30;

      /* Character animation variables */
      --pushY: 0px;        /* JS toggles this during push-up */
      --armScale: 1;       /* JS updates as you grow */
      --shakeX: 0px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      padding:18px 16px 28px;
      background: radial-gradient(1200px 600px at 50% -100px, #24243a 0%, var(--bg) 55%);
      color:var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      text-align:center;
      -webkit-text-size-adjust:100%;
      touch-action: manipulation;
      overflow-x:hidden;
    }

    h1{
      margin:10px 0 6px;
      font-size: clamp(22px, 5vw, 34px);
      letter-spacing:0.2px;
    }

    .sub{
      margin:0 0 14px;
      color:var(--muted);
      font-size: 14px;
    }

    .stage{
      margin:18px auto 10px;
      width:min(560px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius:18px;
      padding:18px 12px 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.35);
      position:relative;
    }

    .arena{
      position:relative;
      height: 260px;
      display:grid;
      place-items:center;
      user-select:none;
      -webkit-user-select:none;
      touch-action: manipulation;
      overflow:hidden;
    }

    /* Floor */
    .floor{
      position:absolute;
      bottom:34px;
      width: min(520px, 92%);
      height: 16px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
      border: 1px solid rgba(255,255,255,0.08);
      filter: blur(0.0px);
    }

    /* Character container moves on push-up */
    .charWrap{
      width: min(520px, 100%);
      height: 240px;
      display:grid;
      place-items:center;
      transform: translateY(var(--pushY)) translateX(var(--shakeX));
      transition: transform 90ms ease;
      will-change: transform;
    }

    /* Sweat droplets (spawned) */
    .sweat{
      position:absolute;
      font-size: 22px;
      opacity: 0.95;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,0.35));
      animation: sweatFall 0.9s ease-out forwards;
      pointer-events:none;
      will-change: transform, opacity;
    }
    @keyframes sweatFall{
      0%   { transform: translateY(0) translateX(0) scale(0.9); opacity: 0.0; }
      12%  { opacity: 1.0; }
      100% { transform: translateY(56px) translateX(var(--dx)) scale(1.05) rotate(10deg); opacity: 0.0; }
    }

    /* Stats */
    .stats{
      margin-top: 10px;
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }
    .pill{
      background: rgba(0,0,0,0.25);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 999px;
      padding: 8px 12px;
      font-size: 14px;
      color: var(--text);
      min-width: 140px;
    }
    .pill span{
      color: var(--muted);
      margin-left:6px;
      font-variant-numeric: tabular-nums;
    }

    /* Button */
    #pushBtn{
      margin-top: 14px;
      width:min(380px, 92%);
      padding: 18px 18px;
      font-size: 18px;
      font-weight: 800;
      letter-spacing:0.4px;
      border: none;
      border-radius: 16px;
      background: linear-gradient(180deg, #ff5aa0, var(--accent));
      color: white;
      cursor: pointer;

      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
      -webkit-user-select:none;

      box-shadow: 0 14px 40px rgba(255,64,129,0.25);
      transition: transform 0.06s ease, filter 0.15s ease, box-shadow 0.15s ease;
    }
    #pushBtn:active{ transform: scale(0.96); }

    .hint{
      margin-top: 10px;
      color: rgba(255,255,255,0.65);
      font-size: 13px;
    }

    /* Rage mode visuals */
    body.rage .stage{
      border-color: rgba(255,59,48,0.35);
      box-shadow: 0 18px 80px rgba(255,59,48,0.18), 0 18px 60px rgba(0,0,0,0.35);
    }
    body.rage #pushBtn{
      background: linear-gradient(180deg, #ff6b60, var(--rage));
      box-shadow: 0 14px 60px rgba(255,59,48,0.25);
      filter: saturate(1.2);
    }
    body.rage .hint{
      color: rgba(255,200,200,0.85);
    }

    /* --- SVG styling helpers --- */
    .svgShadow{ filter: drop-shadow(0 10px 18px rgba(0,0,0,0.35)); }

    /* Biceps grow with --armScale */
    .bicepL, .bicepR{
      transform-box: fill-box;
      transform-origin: center;
      transform: scale(var(--armScale));
    }

    /* Extra ‚Äúpump‚Äù pulse in rage */
    body.rage .bicepL, body.rage .bicepR{
      animation: pump 0.28s ease-in-out infinite alternate;
    }
    @keyframes pump{
      from{ transform: scale(calc(var(--armScale) * 0.98)); }
      to  { transform: scale(calc(var(--armScale) * 1.05)); }
    }

    .footer{
      margin-top: 16px;
      font-size: 12px;
      color: rgba(255,255,255,0.45);
    }
  </style>
</head>

<body>
  <h1>Spam for Gains üí™</h1>
  <p class="sub">Tap fast. Arms get bigger. Trigger Rage Mode. (Sound on üîä)</p>

  <div class="stage" id="stage">
    <div class="arena" id="arena">
      <div class="charWrap" id="charWrap" aria-label="girl doing push-up">

        <!-- Drawn character (SVG) -->
        <svg class="svgShadow" width="520" height="240" viewBox="0 0 520 240" xmlns="http://www.w3.org/2000/svg" role="img">
          <!-- Background glow -->
          <defs>
            <radialGradient id="glow" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="rgba(255,64,129,0.18)"/>
              <stop offset="70%" stop-color="rgba(255,64,129,0.04)"/>
              <stop offset="100%" stop-color="rgba(255,64,129,0.00)"/>
            </radialGradient>
          </defs>
          <ellipse cx="260" cy="150" rx="170" ry="90" fill="url(#glow)"/>

          <!-- Floor shadow under body -->
          <ellipse cx="270" cy="190" rx="170" ry="22" fill="rgba(0,0,0,0.25)"/>

          <!-- GROUP: whole character (we move via parent div) -->
          <g id="girlSvg">
            <!-- Legs (back) -->
            <path d="M330 152 C370 140, 410 142, 450 160" stroke="#2a2a34" stroke-width="18" stroke-linecap="round"/>
            <path d="M430 160 C448 168, 456 176, 460 186" stroke="#2a2a34" stroke-width="16" stroke-linecap="round"/>

            <!-- Shoes -->
            <ellipse cx="463" cy="190" rx="18" ry="10" fill="#0e0e12"/>
            <ellipse cx="452" cy="188" rx="12" ry="8" fill="#0e0e12"/>

            <!-- Torso -->
            <path d="M190 145 C220 120, 290 120, 325 146
                     C310 168, 250 176, 205 163 Z"
                  fill="#ff5aa0" opacity="0.95"/>

            <!-- Waist / shorts -->
            <path d="M260 162 C295 162, 322 150, 340 148
                     C336 176, 308 190, 270 190
                     C230 190, 200 178, 190 160
                     C215 168, 235 162, 260 162 Z"
                  fill="#2a2a34"/>

            <!-- Front arm + bicep (left/front) -->
            <!-- Forearm -->
            <path d="M205 168 C180 178, 160 184, 138 188" stroke="#f6c6b0" stroke-width="16" stroke-linecap="round"/>
            <!-- Hand -->
            <ellipse cx="130" cy="190" rx="14" ry="10" fill="#f6c6b0"/>
            <!-- Bicep bubble (grows) -->
            <ellipse class="bicepL" cx="210" cy="160" rx="14" ry="12" fill="#f6c6b0"/>

            <!-- Rear arm + bicep (right/back) -->
            <path d="M305 168 C280 178, 260 184, 238 188" stroke="#f6c6b0" stroke-width="16" stroke-linecap="round" opacity="0.92"/>
            <ellipse cx="230" cy="190" rx="14" ry="10" fill="#f6c6b0" opacity="0.92"/>
            <ellipse class="bicepR" cx="310" cy="160" rx="14" ry="12" fill="#f6c6b0" opacity="0.92"/>

            <!-- Neck -->
            <rect x="182" y="120" width="18" height="20" rx="8" fill="#f6c6b0"/>

            <!-- Head -->
            <circle cx="175" cy="112" r="30" fill="#f6c6b0"/>

            <!-- Hair -->
            <path d="M150 106 C145 78, 168 68, 190 74
                     C210 80, 216 102, 206 122
                     C198 138, 178 138, 170 126
                     C160 112, 156 110, 150 106 Z"
                  fill="#3a2a22"/>
            <path d="M146 118 C140 112, 140 100, 148 92
                     C152 106, 160 116, 168 122
                     C160 130, 150 128, 146 118 Z"
                  fill="#3a2a22"/>

            <!-- Face -->
            <circle cx="166" cy="112" r="3.2" fill="#1a1a1f"/>
            <circle cx="186" cy="112" r="3.2" fill="#1a1a1f"/>
            <path d="M172 124 C178 128, 184 128, 190 124" stroke="#d77d7a" stroke-width="3" stroke-linecap="round"/>

            <!-- Mat -->
            <rect x="92" y="196" width="340" height="14" rx="7" fill="rgba(255,255,255,0.10)" stroke="rgba(255,255,255,0.10)"/>
          </g>
        </svg>
      </div>

      <div class="floor"></div>
    </div>

    <div class="stats">
      <div class="pill"><strong>Push-ups</strong><span id="count">0</span></div>
      <div class="pill"><strong>Speed</strong><span id="speed">0.0 /s</span></div>
      <div class="pill"><strong>Mode</strong><span id="mode">Chill</span></div>
    </div>

    <button id="pushBtn">PUSH UP</button>
    <div class="hint" id="hint">Tip: tap ~8+ times/sec for üí• Rage Mode</div>
  </div>

  <div class="footer">If sound doesn‚Äôt play on iPhone, tap once then try again (iOS requires user interaction).</div>

  <script>
    /***************
     * iOS anti-zoom
     ***************/
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
      const now = Date.now();
      if (now - lastTouchEnd <= 300) event.preventDefault();
      lastTouchEnd = now;
    }, { passive: false });

    /*********************
     * State + DOM handles
     *********************/
    const arena   = document.getElementById("arena");
    const charWrap= document.getElementById("charWrap");
    const countEl = document.getElementById("count");
    const speedEl = document.getElementById("speed");
    const modeEl  = document.getElementById("mode");
    const hintEl  = document.getElementById("hint");
    const btn     = document.getElementById("pushBtn");

    let count = 0;

    // Tap speed tracking (taps in last 1000ms)
    const tapTimes = [];

    // Muscle growth
    let armScale = 1.0;          // grows with taps

    // Rage mode
    let rage = false;
    const RAGE_THRESHOLD = 8.0;  // taps/sec to enter rage
    const RAGE_EXIT = 5.5;       // taps/sec to exit rage
    let rageUntil = 0;

    /*********************
     * Tiny sound engine
     *********************/
    let audioCtx = null;

    function ensureAudio() {
      if (!audioCtx) {
        const AC = window.AudioContext || window.webkitAudioContext;
        audioCtx = new AC();
      }
      if (audioCtx.state === "suspended") audioCtx.resume();
    }

    function blip({ freq = 180, dur = 0.05, type = "sine", gain = 0.08 }) {
      if (!audioCtx) return;
      const t0 = audioCtx.currentTime;

      const osc = audioCtx.createOscillator();
      const g = audioCtx.createGain();

      osc.type = type;
      osc.frequency.setValueAtTime(freq, t0);

      g.gain.setValueAtTime(0.0001, t0);
      g.gain.exponentialRampToValueAtTime(gain, t0 + 0.01);
      g.gain.exponentialRampToValueAtTime(0.0001, t0 + dur);

      osc.connect(g).connect(audioCtx.destination);
      osc.start(t0);
      osc.stop(t0 + dur + 0.02);
    }

    function thump() {
      blip({ freq: 120, dur: 0.06, type: "triangle", gain: 0.09 });
      blip({ freq: 520, dur: 0.02, type: "square", gain: 0.02 });
    }

    function rageSound() {
      if (!audioCtx) return;
      const t0 = audioCtx.currentTime;

      const osc = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      osc.type = "sawtooth";

      osc.frequency.setValueAtTime(180, t0);
      osc.frequency.exponentialRampToValueAtTime(520, t0 + 0.18);

      g.gain.setValueAtTime(0.0001, t0);
      g.gain.exponentialRampToValueAtTime(0.12, t0 + 0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, t0 + 0.20);

      osc.connect(g).connect(audioCtx.destination);
      osc.start(t0);
      osc.stop(t0 + 0.22);

      blip({ freq: 90, dur: 0.08, type: "triangle", gain: 0.10 });
    }

    /*********************
     * Effects
     *********************/
    function spawnSweat(intensity = 1) {
      const drops = rage ? 2 : 1;
      const total = Math.min(5, drops * intensity);

      for (let i = 0; i < total; i++) {
        const d = document.createElement("div");
        d.className = "sweat";
        d.textContent = "üí¶";

        const x = 50 + (Math.random() * 40 - 20);
        const y = 18 + (Math.random() * 10 - 5);
        d.style.left = x + "%";
        d.style.top  = y + "%";

        const dx = (Math.random() * 24 - 12) + "px";
        d.style.setProperty("--dx", dx);

        arena.appendChild(d);
        setTimeout(() => d.remove(), 950);
      }
    }

    function pushupAnim() {
      // go down
      document.documentElement.style.setProperty("--pushY", "14px");
      setTimeout(() => {
        // up
        document.documentElement.style.setProperty("--pushY", "0px");
      }, 90);
    }

    function currentSpeed() {
      const now = performance.now();
      while (tapTimes.length && (now - tapTimes[0]) > 1000) tapTimes.shift();
      return tapTimes.length;
    }

    function setRage(on) {
      rage = on;
      document.body.classList.toggle("rage", rage);
      modeEl.textContent = rage ? "RAGE üí•" : "Chill";
      hintEl.textContent = rage
        ? "RAGE MODE: faster growth + extra sweat + extra sound üî•"
        : "Tip: tap ~8+ times/sec for üí• Rage Mode";
    }

    function maybeToggleRage(speed) {
      const now = performance.now();

      if (speed >= RAGE_THRESHOLD) {
        rageUntil = now + 900;
        if (!rage) {
          setRage(true);
          rageSound();
          // tiny shake
          document.documentElement.style.setProperty("--shakeX", "-3px");
          setTimeout(()=>document.documentElement.style.setProperty("--shakeX","3px"), 60);
          setTimeout(()=>document.documentElement.style.setProperty("--shakeX","0px"), 120);
        }
      }

      if (rage) {
        const stillRaging = (now < rageUntil) || (speed >= RAGE_EXIT);
        if (!stillRaging) setRage(false);
      }
    }

    function applyArmScale() {
      // clamp scale so it doesn‚Äôt get ridiculous
      const s = Math.min(2.6, Math.max(1.0, armScale));
      document.documentElement.style.setProperty("--armScale", String(s));
    }

    /*********************
     * Main action
     *********************/
    function doPushup() {
      const now = performance.now();
      tapTimes.push(now);

      count++;
      countEl.textContent = count;

      const spd = currentSpeed();
      speedEl.textContent = spd.toFixed(1) + " /s";

      maybeToggleRage(spd);

      pushupAnim();
      spawnSweat(rage ? 2 : 1);

      thump();

      // growth tuning
      const growth = rage ? 0.030 : 0.015;
      armScale += growth;

      if (count % 10 === 0) armScale += (rage ? 0.10 : 0.06);

      applyArmScale();
    }

    /*********************
     * Input handling
     *********************/
    btn.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      ensureAudio();
      doPushup();
    });

    // Also allow tapping the character itself
    charWrap.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      ensureAudio();
      doPushup();
    });

    // keep speed UI fresh
    setInterval(() => {
      const spd = currentSpeed();
      speedEl.textContent = spd.toFixed(1) + " /s";
      maybeToggleRage(spd);
    }, 180);

    applyArmScale();
  </script>
</body>
</html>

